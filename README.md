
# NJUPT-API ç®€ä»‹

NJUPT-API çš„åˆè¡·æ˜¯å¸Œæœ›ä¸ºNJUPTçš„å„ä¸ªç³»ç»Ÿæä¾›ä¸€å¥—è·¨ç³»ç»Ÿçš„ç®€æ´ã€ä¼˜é›…çš„ã€Pythonicçš„APIæ¥å£ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•å¼€å‘ã€‚

é¡¹ç›®ç»“æ„å—åˆ°äº†å¼€æºé¡¹ç›® [zhihu-api](https://github.com/lzjun567/zhihu-api)çš„å¯å‘ï¼Œåœ¨è¿™é‡Œå¯¹ä½œè€…[@lzjun567](https://github.com/lzjun567/)è¡¨ç¤ºæ„Ÿè°¢


# å®‰è£…
```bash
pipenv install njupt # or pip install njupt
âœ¨ğŸ°âœ¨
# ä»…æ”¯æŒpython3
```
# ç›®å‰å®ç°çš„åŠŸèƒ½
[æ­£æ–¹ç³»ç»Ÿ](#æ­£æ–¹ç³»ç»Ÿ)
- [ç™»å½•æ­£æ–¹](#ç™»å½•æ­£æ–¹)
- [è·å–è¯¾ç¨‹æˆç»©å’Œç»©ç‚¹](#è·å–è¯¾ç¨‹æˆç»©å’Œç»©ç‚¹)
- [è·å–ç­‰çº§è€ƒè¯•ä¿¡æ¯](#è·å–ç­‰çº§è€ƒè¯•ä¿¡æ¯)
- [è·å–å…¨éƒ¨è¯¾ç¨‹](#è·å–å…¨éƒ¨è¯¾ç¨‹)
- [è·å–è¯¾è¡¨](#è·å–è¯¾è¡¨)

[æ ¡å›­å¡ç³»ç»Ÿ](#æ ¡å›­å¡ç³»ç»Ÿ)
- [ç™»å½•æ ¡å›­å¡](#ç™»å½•æ ¡å›­å¡)
- [è·å–æ ¡å›­å¡ä½™é¢](#è·å–æ ¡å›­å¡ä½™é¢)
- [å……å€¼æ ¡å›­å¡](#å……å€¼æ ¡å›­å¡)
- [è·å–è´¦å•](#è·å–è´¦å•)
- [è·å–ç½‘è´¹ä½™é¢](#è·å–ç½‘è´¹ä½™é¢)
- [å……å€¼ç½‘è´¹](#å……å€¼ç½‘è´¹)
- [å……å€¼å¯å®¤ç”µè´¹](#å……å€¼å¯å®¤ç”µè´¹)
## æ­£æ–¹ç³»ç»Ÿ

### ç™»å½•æ­£æ–¹
```python
from njupt import Zhengfang
zhengfang = Zhengfang()
>>> zhengfang.login(account='B1xxxxxxx',password='password')
# or zhengfang = Zhengfang('B1xxxxxxx','password')

```
### è·å–è¯¾ç¨‹æˆç»©å’Œç»©ç‚¹
```python
>>> zhengfang.get_score() 
    {'gpa': 4.99,
    'courses': [
        {
            'year': '2015-2016',  # å­¦å¹´
            'semester': '1',  # å­¦æœŸ
            'code': '00wk00003',  # è¯¾ç¨‹ä»£ç 
            'name': 'ä»"æ„šæ˜§"åˆ°"ç§‘å­¦"-ç§‘å­¦æŠ€æœ¯ç®€å²',  # è¯¾ç¨‹åç§°
            'attribute': 'ä»»é€‰',  # è¯¾ç¨‹æ€§è´¨
            'belong': 'å…¨æ ¡ä»»é€‰è¯¾',  # è¯¾ç¨‹å½’å±
            'credit': '2.0',  # å­¦åˆ†
            'point': '',  # ç»©ç‚¹
            'score': '81',  # æˆç»©
            'minor_mark': '0',  # è¾…ä¿®æ ‡è®°
            'make_up_score': '',  # è¾…ä¿®æ ‡è®°
            'retake_score': '',  # é‡ä¿®æˆç»© 
            'college': 'ç½‘ç»œè¯¾ç¨‹',  # å¼€è¯¾å­¦é™¢
            'note': '',  # å¤‡æ³¨ 
            'retake_mark': '0',  # é‡ä¿®æ ‡è®°
            'english_name': ''  # è‹±æ–‡åç§°
        }, 
        ...
        ]
    }
```

### è·å–ç­‰çº§è€ƒè¯•ä¿¡æ¯
```python
>>> zhengfang.get_grade() 
    [
        {
        'date': '20151219',
         'name': 'å…¨å›½å¤§å­¦è‹±è¯­å››çº§è€ƒè¯•',
         'number': '320082152113313',
         'score': '547',
         'semester': '1',
         'year': '2015-2016'
        },
        ...
    ]
```

### è·å–å…¨éƒ¨è¯¾ç¨‹
```python
>>> zhengfang.get_courses()
    [{'class_end': 9,
      'class_start': 8,
      'day': 1,
      'name': 'å¸‚åœºè¥é”€',
      'room': 'æ•™4ï¼101',
      'teacher': 'ç‹æ³¢(ç”·)',
      'week': 'ç¬¬1-15å‘¨|å•å‘¨',
      'interval': 2,
      'week_end': 15,
      'week_start': 1
      },
     {
      'class_end': 9,
      'class_start': 8,
      'day': 3,
      'name': 'å¸‚åœºè¥é”€',
      'room': 'æ•™4ï¼101',
      'teacher': 'ç‹æ³¢(ç”·)',
      'week': 'ç¬¬1-16å‘¨',
      'interval': 1,
      'week_end': 16,
      'week_start': 1
      },
      ...
    ]
```

### è·å–è¯¾è¡¨
```python
>>> zhengfang.get_schedule(week=1)
    # äºŒç»´åˆ—è¡¨ï¼Œ[i][j] ä»£è¡¨å‘¨iç¬¬jèŠ‚è¯¾çš„è¯¾ç¨‹ã€‚ ä¸ºäº†æ–¹ä¾¿ï¼Œiæˆ–jä¸ºé›¶0çš„å•å…ƒå‡ä¸ä½¿ç”¨ã€‚
    # è¯¾ç¨‹çš„èŠ‚æ¬¡ä½¿ç”¨ä¸€å¤©12èŠ‚è¯¾çš„å½¢å¼æè¿°ã€‚
    # è¯¾ç¨‹ä¿¡æ¯ä½¿ç”¨dictè¿›è¡Œæè¿°ã€‚
    # ä¸€ä¸ªå‚è€ƒçš„ç»“æ„å¦‚ä¸‹
    [
        [],
        [   None,
            {
            'classroom': 'æ•™4ï¼202', 
            'name': 'æŠ€æœ¯ç»æµå­¦', 
            'teacher': 'å‚¨æˆç¥¥'
            },
            ...
        ],
        ...
    ]

```



## æ ¡å›­å¡ç³»ç»Ÿ
### ç™»å½•æ ¡å›­å¡
```python
from njupt import Card
>>> card = Card()
>>> card.login(account='11020xxxxxxxxxx',password='passwd')
# or card = Card(account,password)
```

### è·å–æ ¡å›­å¡ä½™é¢
```python
>>> card.get_balance()
    {
        'balance': 10.01,  # åˆ°è´¦ä½™é¢
        'unsettle_balance': 0.01  # è¿‡æ¸¡ä½™é¢
        'total': 10.02  # æ€»ä½™é¢
    }
```
### å……å€¼æ ¡å›­å¡
```python
>>> card.recharge(amount=2.33)
    {   
        'success':True,  # è½¬è´¦æ˜¯å¦æˆåŠŸ
        'code': 0,  # çŠ¶æ€ç 
        'msg': 'è½¬è´¦æˆåŠŸ'  # é™„åŠ ä¿¡æ¯
    }
```
### è·å–è´¦å•
```python
>>> card.get_bill(start_date='2017-02-33',end_date='2018-01-03',rows=30,page=1)
    {'recodes': 
        [
            {'balances': 39.71, # ä½™é¢
              'change': -5, # å˜åŠ¨
              'comment': 'æœªçŸ¥ç³»ç»Ÿ,äº¤ç”µè´¹', # æ³¨é‡Š
              'department': 'ä»™æ—å”®ç”µå¤„', # æ“ä½œéƒ¨é—¨
              'time': '2018-01-26 20:55:40', # æ—¶é—´
              'type': 'ä»£æ‰£ä»£ç¼´', # ç±»å‹
              'week': 'æ˜ŸæœŸäº”'}, # æ˜ŸæœŸ
            {'balances': 39.71,
              'change': -7.5,
              'comment': '',
              'department': 'ä¸€é¤å…äºŒæ¥¼æ¸…çœŸé£Ÿå ‚',
              'time': '2018-01-24 17:09:36',
              'type': 'æŒå¡äººæ¶ˆè´¹',
              'week': 'æ˜ŸæœŸä¸‰'},
               ... 
        ],
    'total': 52, # æ€»çš„è®°å½•æ•°
    'total_pages':2,  # æ€»é¡µæ•°
    'page':1  # å½“å‰çš„é¡µç 
    }
```

### è·å–ç½‘è´¹ä½™é¢
```python
>>> card.get_net_balance()
    2.33
```

### å……å€¼ç½‘è´¹
```python
>>> card.recharge_net(amount=2.33)
    {
        'success': True, 
        'code' : 0,
        'Msg' : 'ç¼´è´¹æˆåŠŸï¼'
    }
```
### å……å€¼å¯å®¤ç”µè´¹
```python
>>> card.recharge_xianlin_elec(amount=2.33,building_name='å…°è‹‘11æ ‹',room_id='4031')
    {
        'success': True, 
        'code' : 0,
        'Msg' : 'ç¼´è´¹æˆåŠŸï¼'
    }
    # ä¸‰ç‰Œæ¥¼æ ¡åŒºä¸ºcard.recharge_sanpailou_elec()ï¼Œå‚æ•°ç›¸åŒï¼ˆæœªæµ‹è¯•ï¼‰
```


# todos

å›¾ä¹¦é¦†ç³»ç»Ÿå’Œå¥¥å…°ç³»ç»Ÿçš„å¸¸ç”¨æ¥å£